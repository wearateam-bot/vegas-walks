<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vegas Walks GPS Test</title>
</head>

<body style="font-family:system-ui;text-align:center;padding:20px;">

<h2>Vegas Walks – GPS TEST</h2>

<button onclick="start()">Start GPS</button>

<p id="status">Waiting…</p>

<script>
const stopLat = 36.15886;
const stopLng = -115.14939;

function start() {
  if (!navigator.geolocation) {
    document.getElementById("status").innerText = "Geolocation NOT supported.";
    return;
  }

  navigator.geolocation.watchPosition(
    pos => {
      const lat = pos.coords.latitude;
      const lng = pos.coords.longitude;

      const d = distance(lat, lng, stopLat, stopLng);

      document.getElementById("status").innerHTML =
        `Your location:<br>
        Lat: ${lat}<br>
        Lng: ${lng}<br><br>
        Distance to Sin City Hostel:<br>
        <b>${Math.round(d)} meters</b>`;
    },
    err => {
      document.getElementById("status").innerText =
        "Location error: " + err.message;
    },
    { enableHighAccuracy: true, maximumAge: 0 }
  );
}

function distance(a,b,c,d){
  const R=6371000,to=x=>x*Math.PI/180;
  const A=Math.sin(to(c-a)/2)**2+
    Math.cos(to(a))*Math.cos(to(c))*Math.sin(to(d-b)/2)**2;
  return R*2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));
}
</script>

</body>
</html>